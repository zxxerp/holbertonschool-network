#!/usr/bin/env bash
# create a temporary working copy of the hosts file
cp /etc/hosts ~/hosts.new

# perform the substitution on the TEMPORARY file
# change 127.0.0.1 to 127.0.0.2 inside our temp copy
sed -i 's/127.0.0.1/127.0.0.2/g' ~/hosts.new

# add the Facebook entry to the TEMPORARY file
echo "8.8.8.8 facebook.com" >> ~/hosts.new

# overwrite the content of the real /etc/hosts
# using 'cp' (instead of mv) works even on mounted files
cp -f ~/hosts.new /etc/hosts
